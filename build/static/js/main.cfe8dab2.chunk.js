(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var o=n(0),s=n(1),c=n(14),i=n.n(c),r=n(3),a=n(4),u=n.n(a),l="/api/persons",f={getAll:function(){return u.a.get(l).then((function(e){return e.data}))},create:function(e){return u.a.post(l,e).then((function(e){return e.data}))},deletePerson:function(e){return u.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},update:function(e,t){return u.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data}))}},d=function(e){var t=e.persons,n=e.setPersons,s=e.newName,c=e.setNewName,i=e.newNumber,r=e.setNewNumber,a=e.setNotificationMessage;return Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault();var o={name:s,number:i};if(t.some((function(e){return e.name===s}))){var u=t.find((function(e){return e.name===s}));window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))&&f.update(u.id,o).then((function(e){n(t.map((function(t){return t.id!==u.id?t:e}))),c(""),r(""),a({message:"Changed ".concat(s,"'s number to ").concat(i),type:"notificaiton"}),setTimeout((function(){a({message:null,type:null})}),5e3)})).catch((function(){a({message:"Information of ".concat(s," has already been removed from server"),type:"error"}),setTimeout((function(){a({message:null,type:null})}),5e3),n(t.filter((function(e){return e.id!==u.id}))),c(""),r("")}))}else f.create(o).then((function(e){n(t.concat(e)),c(""),r(""),a({message:"Added ".concat(s),type:"notification"}),setTimeout((function(){a({message:null,type:null})}),5e3)}))},children:[Object(o.jsxs)("div",{children:["name:",Object(o.jsx)("input",{value:s,onChange:function(e){c(e.target.value)}})]}),Object(o.jsxs)("div",{children:["number:",Object(o.jsx)("input",{value:i,onChange:function(e){r(e.target.value)}})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},m=function(e){var t=e.person,n=e.setPersons,s=e.persons,c=e.setNotificationMessage;return Object(o.jsxs)("div",{children:[t.name," ",t.number," ",Object(o.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(t.name,"?"))&&f.deletePerson(t.id).then((function(){var e=s.filter((function(e){return e.id!==t.id}));n(e),c({message:"Deleted ".concat(t.name),type:"notification"}),setTimeout((function(){c({message:null,type:null})}),5e3)})).catch((function(){c({message:"Information of ".concat(t.name," has already been removed from server"),type:"error"}),setTimeout((function(){c({message:null,type:null})}),5e3),n(s.filter((function(e){return e.id!==t.id})))}))},children:"delete"})]})},b=function(e){var t=e.persons,n=e.newFilter,s=e.setPersons,c=e.setNotificationMessage;return t.map((function(e){return e.name.toLowerCase().includes(n.toLowerCase())?Object(o.jsx)(m,{person:e,setPersons:s,persons:t,setNotificationMessage:c},e.name):null}))},j=function(e){var t=e.newFilter,n=e.setNewFilter;return Object(o.jsxs)("div",{children:["filter shown with:",Object(o.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})},h=function(e){var t=e.notificationMessage;return null===t.message?null:Object(o.jsx)("div",{className:t.type,children:t.message})},p=function(){var e=Object(s.useState)([]),t=Object(r.a)(e,2),n=t[0],c=t[1],i=Object(s.useState)(""),a=Object(r.a)(i,2),u=a[0],l=a[1],m=Object(s.useState)(""),p=Object(r.a)(m,2),g=p[0],O=p[1],v=Object(s.useState)(""),w=Object(r.a)(v,2),x=w[0],N=w[1],y=Object(s.useState)({message:null,type:null}),P=Object(r.a)(y,2),M=P[0],k=P[1];return Object(s.useEffect)((function(){console.log("effect"),f.getAll().then((function(e){console.log("promise fulfilled"),c(e)}))}),[]),Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(h,{notificationMessage:M}),Object(o.jsx)(j,{newFilter:x,setNewFilter:N}),Object(o.jsx)("h3",{children:"add a new"}),Object(o.jsx)(d,{persons:n,setPersons:c,newName:u,setNewName:l,newNumber:g,setNewNumber:O,setNotificationMessage:k}),Object(o.jsx)("h3",{children:"Numbers"}),Object(o.jsx)(b,{persons:n,newFilter:x,setPersons:c,setNotificationMessage:k})]})};n(38);i.a.render(Object(o.jsx)(p,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.cfe8dab2.chunk.js.map